{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":37,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../lib/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":29,"index":216}}],"key":"+Oh+VyeK103zLsUwT5Mv/nxNndY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoRouter = require(_dependencyMap[2], \"expo-router\");\n  var _libApi = require(_dependencyMap[3], \"../lib/api\");\n  var api = _interopDefault(_libApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    loading: true,\n    signIn: async () => {},\n    signUp: async () => {},\n    signOut: async () => {}\n  });\n  const useAuth = () => {\n    _s();\n    return (0, _react.useContext)(AuthContext);\n  };\n  _s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  const AuthProvider = ({\n    children\n  }) => {\n    _s2();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('access_token');\n        const userStr = await AsyncStorage.default.getItem('user');\n        if (token && userStr) {\n          const userData = JSON.parse(userStr);\n          setUser(userData);\n\n          // Verify token is still valid\n          try {\n            const response = await api.default.get('/auth/me');\n            setUser(response.data);\n          } catch (error) {\n            // Token invalid, clear\n            await AsyncStorage.default.removeItem('access_token');\n            await AsyncStorage.default.removeItem('user');\n            setUser(null);\n          }\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const signIn = async (email, password) => {\n      try {\n        const response = await api.default.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('access_token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n        _expoRouter.router.replace('/(tabs)/add');\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const signUp = async (email, password) => {\n      try {\n        const response = await api.default.post('/auth/register', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('access_token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n        _expoRouter.router.replace('/(tabs)/add');\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const signOut = async () => {\n      await AsyncStorage.default.removeItem('access_token');\n      await AsyncStorage.default.removeItem('user');\n      setUser(null);\n      _expoRouter.router.replace('/login');\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        signIn,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this);\n  };\n  _s2(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":141,"map":[[15,2,28,0,"Object"],[15,8,28,0],[15,9,28,0,"defineProperty"],[15,23,28,0],[15,24,28,0,"exports"],[15,31,28,0],[16,4,28,0,"enumerable"],[16,14,28,0],[17,4,28,0,"get"],[17,7,28,0],[17,18,28,0,"get"],[17,19,28,0],[18,6,28,0],[18,13,28,0,"useAuth"],[18,20,28,0],[19,4,28,0],[20,2,28,0],[21,2,30,0,"Object"],[21,8,30,0],[21,9,30,0,"defineProperty"],[21,23,30,0],[21,24,30,0,"exports"],[21,31,30,0],[22,4,30,0,"enumerable"],[22,14,30,0],[23,4,30,0,"get"],[23,7,30,0],[23,18,30,0,"get"],[23,19,30,0],[24,6,30,0],[24,13,30,0,"AuthProvider"],[24,25,30,0],[25,4,30,0],[26,2,30,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_expoRouter"],[30,17,3,0],[30,20,3,0,"require"],[30,27,3,0],[30,28,3,0,"_dependencyMap"],[30,42,3,0],[31,2,4,0],[31,6,4,0,"_libApi"],[31,13,4,0],[31,16,4,0,"require"],[31,23,4,0],[31,24,4,0,"_dependencyMap"],[31,38,4,0],[32,2,4,0],[32,6,4,0,"api"],[32,9,4,0],[32,12,4,0,"_interopDefault"],[32,27,4,0],[32,28,4,0,"_libApi"],[32,35,4,0],[33,2,4,29],[33,6,4,29,"_reactJsxDevRuntime"],[33,25,4,29],[33,28,4,29,"require"],[33,35,4,29],[33,36,4,29,"_dependencyMap"],[33,50,4,29],[34,2,20,0],[34,8,20,6,"AuthContext"],[34,19,20,17],[34,35,20,20],[34,39,20,20,"createContext"],[34,45,20,33],[34,46,20,33,"createContext"],[34,59,20,33],[34,61,20,51],[35,4,21,2,"user"],[35,8,21,6],[35,10,21,8],[35,14,21,12],[36,4,22,2,"loading"],[36,11,22,9],[36,13,22,11],[36,17,22,15],[37,4,23,2,"signIn"],[37,10,23,8],[37,12,23,10],[37,18,23,10,"signIn"],[37,19,23,10],[37,24,23,22],[37,25,23,23],[37,26,23,24],[38,4,24,2,"signUp"],[38,10,24,8],[38,12,24,10],[38,18,24,10,"signUp"],[38,19,24,10],[38,24,24,22],[38,25,24,23],[38,26,24,24],[39,4,25,2,"signOut"],[39,11,25,9],[39,13,25,11],[39,19,25,11,"signOut"],[39,20,25,11],[39,25,25,23],[39,26,25,24],[40,2,26,0],[40,3,26,1],[40,4,26,2],[41,2,28,7],[41,8,28,13,"useAuth"],[41,15,28,20],[41,18,28,23,"useAuth"],[41,19,28,23],[42,4,28,23,"_s"],[42,6,28,23],[43,4,28,23],[43,11,28,29],[43,15,28,29,"useContext"],[43,21,28,39],[43,22,28,39,"useContext"],[43,32,28,39],[43,34,28,40,"AuthContext"],[43,45,28,51],[43,46,28,52],[44,2,28,52],[45,2,28,53,"_s"],[45,4,28,53],[45,5,28,13,"useAuth"],[45,12,28,20],[46,2,30,7],[46,8,30,13,"AuthProvider"],[46,20,30,25],[46,23,30,28,"AuthProvider"],[46,24,30,29],[47,4,30,31,"children"],[48,2,30,71],[48,3,30,72],[48,8,30,77],[49,4,30,77,"_s2"],[49,7,30,77],[50,4,31,2],[50,10,31,8],[50,11,31,9,"user"],[50,15,31,13],[50,17,31,15,"setUser"],[50,24,31,22],[50,25,31,23],[50,28,31,26],[50,32,31,26,"useState"],[50,38,31,34],[50,39,31,34,"useState"],[50,47,31,34],[50,49,31,48],[50,53,31,52],[50,54,31,53],[51,4,32,2],[51,10,32,8],[51,11,32,9,"loading"],[51,18,32,16],[51,20,32,18,"setLoading"],[51,30,32,28],[51,31,32,29],[51,34,32,32],[51,38,32,32,"useState"],[51,44,32,40],[51,45,32,40,"useState"],[51,53,32,40],[51,55,32,41],[51,59,32,45],[51,60,32,46],[52,4,34,2],[52,8,34,2,"useEffect"],[52,14,34,11],[52,15,34,11,"useEffect"],[52,24,34,11],[52,26,34,12],[52,32,34,18],[53,6,35,4,"checkAuth"],[53,15,35,13],[53,16,35,14],[53,17,35,15],[54,4,36,2],[54,5,36,3],[54,7,36,5],[54,9,36,7],[54,10,36,8],[55,4,38,2],[55,10,38,8,"checkAuth"],[55,19,38,17],[55,22,38,20],[55,28,38,20,"checkAuth"],[55,29,38,20],[55,34,38,32],[56,6,39,4],[56,10,39,8],[57,8,40,6],[57,14,40,12,"token"],[57,19,40,17],[57,22,40,20],[57,28,40,26,"AsyncStorage"],[57,40,40,38],[57,41,40,38,"default"],[57,48,40,38],[57,49,40,39,"getItem"],[57,56,40,46],[57,57,40,47],[57,71,40,61],[57,72,40,62],[58,8,41,6],[58,14,41,12,"userStr"],[58,21,41,19],[58,24,41,22],[58,30,41,28,"AsyncStorage"],[58,42,41,40],[58,43,41,40,"default"],[58,50,41,40],[58,51,41,41,"getItem"],[58,58,41,48],[58,59,41,49],[58,65,41,55],[58,66,41,56],[59,8,43,6],[59,12,43,10,"token"],[59,17,43,15],[59,21,43,19,"userStr"],[59,28,43,26],[59,30,43,28],[60,10,44,8],[60,16,44,14,"userData"],[60,24,44,22],[60,27,44,25,"JSON"],[60,31,44,29],[60,32,44,30,"parse"],[60,37,44,35],[60,38,44,36,"userStr"],[60,45,44,43],[60,46,44,44],[61,10,45,8,"setUser"],[61,17,45,15],[61,18,45,16,"userData"],[61,26,45,24],[61,27,45,25],[63,10,47,8],[64,10,48,8],[64,14,48,12],[65,12,49,10],[65,18,49,16,"response"],[65,26,49,24],[65,29,49,27],[65,35,49,33,"api"],[65,38,49,36],[65,39,49,36,"default"],[65,46,49,36],[65,47,49,37,"get"],[65,50,49,40],[65,51,49,41],[65,61,49,51],[65,62,49,52],[66,12,50,10,"setUser"],[66,19,50,17],[66,20,50,18,"response"],[66,28,50,26],[66,29,50,27,"data"],[66,33,50,31],[66,34,50,32],[67,10,51,8],[67,11,51,9],[67,12,51,10],[67,19,51,17,"error"],[67,24,51,22],[67,26,51,24],[68,12,52,10],[69,12,53,10],[69,18,53,16,"AsyncStorage"],[69,30,53,28],[69,31,53,28,"default"],[69,38,53,28],[69,39,53,29,"removeItem"],[69,49,53,39],[69,50,53,40],[69,64,53,54],[69,65,53,55],[70,12,54,10],[70,18,54,16,"AsyncStorage"],[70,30,54,28],[70,31,54,28,"default"],[70,38,54,28],[70,39,54,29,"removeItem"],[70,49,54,39],[70,50,54,40],[70,56,54,46],[70,57,54,47],[71,12,55,10,"setUser"],[71,19,55,17],[71,20,55,18],[71,24,55,22],[71,25,55,23],[72,10,56,8],[73,8,57,6],[74,6,58,4],[74,7,58,5],[74,8,58,6],[74,15,58,13,"error"],[74,20,58,18],[74,22,58,20],[75,8,59,6,"console"],[75,15,59,13],[75,16,59,14,"error"],[75,21,59,19],[75,22,59,20],[75,41,59,39],[75,43,59,41,"error"],[75,48,59,46],[75,49,59,47],[76,6,60,4],[76,7,60,5],[76,16,60,14],[77,8,61,6,"setLoading"],[77,18,61,16],[77,19,61,17],[77,24,61,22],[77,25,61,23],[78,6,62,4],[79,4,63,2],[79,5,63,3],[80,4,65,2],[80,10,65,8,"signIn"],[80,16,65,14],[80,19,65,17],[80,25,65,17,"signIn"],[80,26,65,24,"email"],[80,31,65,37],[80,33,65,39,"password"],[80,41,65,55],[80,46,65,60],[81,6,66,4],[81,10,66,8],[82,8,67,6],[82,14,67,12,"response"],[82,22,67,20],[82,25,67,23],[82,31,67,29,"api"],[82,34,67,32],[82,35,67,32,"default"],[82,42,67,32],[82,43,67,33,"post"],[82,47,67,37],[82,48,67,38],[82,61,67,51],[82,63,67,53],[83,10,67,55,"email"],[83,15,67,60],[84,10,67,62,"password"],[85,8,67,71],[85,9,67,72],[85,10,67,73],[86,8,68,6],[86,14,68,12],[87,10,68,14,"access_token"],[87,22,68,26],[88,10,68,28,"user"],[88,14,68,32],[88,16,68,34,"userData"],[89,8,68,43],[89,9,68,44],[89,12,68,47,"response"],[89,20,68,55],[89,21,68,56,"data"],[89,25,68,60],[90,8,70,6],[90,14,70,12,"AsyncStorage"],[90,26,70,24],[90,27,70,24,"default"],[90,34,70,24],[90,35,70,25,"setItem"],[90,42,70,32],[90,43,70,33],[90,57,70,47],[90,59,70,49,"access_token"],[90,71,70,61],[90,72,70,62],[91,8,71,6],[91,14,71,12,"AsyncStorage"],[91,26,71,24],[91,27,71,24,"default"],[91,34,71,24],[91,35,71,25,"setItem"],[91,42,71,32],[91,43,71,33],[91,49,71,39],[91,51,71,41,"JSON"],[91,55,71,45],[91,56,71,46,"stringify"],[91,65,71,55],[91,66,71,56,"userData"],[91,74,71,64],[91,75,71,65],[91,76,71,66],[92,8,73,6,"setUser"],[92,15,73,13],[92,16,73,14,"userData"],[92,24,73,22],[92,25,73,23],[93,8,74,6,"router"],[93,19,74,12],[93,20,74,12,"router"],[93,26,74,12],[93,27,74,13,"replace"],[93,34,74,20],[93,35,74,21],[93,48,74,34],[93,49,74,35],[94,6,75,4],[94,7,75,5],[94,8,75,6],[94,15,75,13,"error"],[94,20,75,23],[94,22,75,25],[95,8,76,6],[95,14,76,12],[95,18,76,16,"Error"],[95,23,76,21],[95,24,76,22,"error"],[95,29,76,27],[95,30,76,28,"response"],[95,38,76,36],[95,40,76,38,"data"],[95,44,76,42],[95,46,76,44,"detail"],[95,52,76,50],[95,56,76,54],[95,70,76,68],[95,71,76,69],[96,6,77,4],[97,4,78,2],[97,5,78,3],[98,4,80,2],[98,10,80,8,"signUp"],[98,16,80,14],[98,19,80,17],[98,25,80,17,"signUp"],[98,26,80,24,"email"],[98,31,80,37],[98,33,80,39,"password"],[98,41,80,55],[98,46,80,60],[99,6,81,4],[99,10,81,8],[100,8,82,6],[100,14,82,12,"response"],[100,22,82,20],[100,25,82,23],[100,31,82,29,"api"],[100,34,82,32],[100,35,82,32,"default"],[100,42,82,32],[100,43,82,33,"post"],[100,47,82,37],[100,48,82,38],[100,64,82,54],[100,66,82,56],[101,10,82,58,"email"],[101,15,82,63],[102,10,82,65,"password"],[103,8,82,74],[103,9,82,75],[103,10,82,76],[104,8,83,6],[104,14,83,12],[105,10,83,14,"access_token"],[105,22,83,26],[106,10,83,28,"user"],[106,14,83,32],[106,16,83,34,"userData"],[107,8,83,43],[107,9,83,44],[107,12,83,47,"response"],[107,20,83,55],[107,21,83,56,"data"],[107,25,83,60],[108,8,85,6],[108,14,85,12,"AsyncStorage"],[108,26,85,24],[108,27,85,24,"default"],[108,34,85,24],[108,35,85,25,"setItem"],[108,42,85,32],[108,43,85,33],[108,57,85,47],[108,59,85,49,"access_token"],[108,71,85,61],[108,72,85,62],[109,8,86,6],[109,14,86,12,"AsyncStorage"],[109,26,86,24],[109,27,86,24,"default"],[109,34,86,24],[109,35,86,25,"setItem"],[109,42,86,32],[109,43,86,33],[109,49,86,39],[109,51,86,41,"JSON"],[109,55,86,45],[109,56,86,46,"stringify"],[109,65,86,55],[109,66,86,56,"userData"],[109,74,86,64],[109,75,86,65],[109,76,86,66],[110,8,88,6,"setUser"],[110,15,88,13],[110,16,88,14,"userData"],[110,24,88,22],[110,25,88,23],[111,8,89,6,"router"],[111,19,89,12],[111,20,89,12,"router"],[111,26,89,12],[111,27,89,13,"replace"],[111,34,89,20],[111,35,89,21],[111,48,89,34],[111,49,89,35],[112,6,90,4],[112,7,90,5],[112,8,90,6],[112,15,90,13,"error"],[112,20,90,23],[112,22,90,25],[113,8,91,6],[113,14,91,12],[113,18,91,16,"Error"],[113,23,91,21],[113,24,91,22,"error"],[113,29,91,27],[113,30,91,28,"response"],[113,38,91,36],[113,40,91,38,"data"],[113,44,91,42],[113,46,91,44,"detail"],[113,52,91,50],[113,56,91,54],[113,77,91,75],[113,78,91,76],[114,6,92,4],[115,4,93,2],[115,5,93,3],[116,4,95,2],[116,10,95,8,"signOut"],[116,17,95,15],[116,20,95,18],[116,26,95,18,"signOut"],[116,27,95,18],[116,32,95,30],[117,6,96,4],[117,12,96,10,"AsyncStorage"],[117,24,96,22],[117,25,96,22,"default"],[117,32,96,22],[117,33,96,23,"removeItem"],[117,43,96,33],[117,44,96,34],[117,58,96,48],[117,59,96,49],[118,6,97,4],[118,12,97,10,"AsyncStorage"],[118,24,97,22],[118,25,97,22,"default"],[118,32,97,22],[118,33,97,23,"removeItem"],[118,43,97,33],[118,44,97,34],[118,50,97,40],[118,51,97,41],[119,6,98,4,"setUser"],[119,13,98,11],[119,14,98,12],[119,18,98,16],[119,19,98,17],[120,6,99,4,"router"],[120,17,99,10],[120,18,99,10,"router"],[120,24,99,10],[120,25,99,11,"replace"],[120,32,99,18],[120,33,99,19],[120,41,99,27],[120,42,99,28],[121,4,100,2],[121,5,100,3],[122,4,102,2],[122,24,103,4],[122,28,103,4,"_reactJsxDevRuntime"],[122,47,103,4],[122,48,103,4,"jsxDEV"],[122,54,103,4],[122,56,103,5,"AuthContext"],[122,67,103,16],[122,68,103,17,"Provider"],[122,76,103,25],[123,6,103,26,"value"],[123,11,103,31],[123,13,103,33],[124,8,103,35,"user"],[124,12,103,39],[125,8,103,41,"loading"],[125,15,103,48],[126,8,103,50,"signIn"],[126,14,103,56],[127,8,103,58,"signUp"],[127,14,103,64],[128,8,103,66,"signOut"],[129,6,103,74],[129,7,103,76],[130,6,103,76,"children"],[130,14,103,76],[130,16,104,7,"children"],[131,4,104,15],[132,6,104,15,"fileName"],[132,14,104,15],[132,16,104,15,"_jsxFileName"],[132,28,104,15],[133,6,104,15,"lineNumber"],[133,16,104,15],[134,6,104,15,"columnNumber"],[134,18,104,15],[135,4,104,15],[135,11,105,26],[135,12,105,27],[136,2,107,0],[136,3,107,1],[137,2,107,2,"_s2"],[137,5,107,2],[137,6,30,13,"AuthProvider"],[137,18,30,25],[138,2,30,25,"_c"],[138,4,30,25],[138,7,30,13,"AuthProvider"],[138,19,30,25],[139,2,30,25],[139,6,30,25,"_c"],[139,8,30,25],[140,2,30,25,"$RefreshReg$"],[140,14,30,25],[140,15,30,25,"_c"],[140,17,30,25],[141,0,30,25],[141,3]],"functionMap":{"names":["<global>","createContext$argument_0.signIn","createContext$argument_0.signUp","createContext$argument_0.signOut","useAuth","AuthProvider","useEffect$argument_0","checkAuth","signIn","signUp","signOut"],"mappings":"AAA;UCsB,cD;UEC,cF;WGC,cH;uBIG,6BJ;4BKE;YCI;GDE;oBEE;GFyB;iBGE;GHa;iBIE;GJa;kBKE;GLK;CLO"},"hasCjsExports":false},"type":"js/module"}]}