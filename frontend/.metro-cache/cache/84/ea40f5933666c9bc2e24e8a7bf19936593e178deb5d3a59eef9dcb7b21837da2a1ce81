{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":37,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../lib/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":29,"index":216}}],"key":"+Oh+VyeK103zLsUwT5Mv/nxNndY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoRouter = require(_dependencyMap[2], \"expo-router\");\n  var _libApi = require(_dependencyMap[3], \"../lib/api\");\n  var api = _interopDefault(_libApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    loading: true,\n    signIn: async () => {},\n    signUp: async () => {},\n    signOut: async () => {}\n  });\n  const useAuth = () => (0, _react.useContext)(AuthContext);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('access_token');\n        const userStr = await AsyncStorage.default.getItem('user');\n        if (token && userStr) {\n          const userData = JSON.parse(userStr);\n          setUser(userData);\n\n          // Verify token is still valid\n          try {\n            const response = await api.default.get('/auth/me');\n            setUser(response.data);\n          } catch (error) {\n            // Token invalid, clear\n            await AsyncStorage.default.removeItem('access_token');\n            await AsyncStorage.default.removeItem('user');\n            setUser(null);\n          }\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const signIn = async (email, password) => {\n      try {\n        const response = await api.default.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('access_token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n        _expoRouter.router.replace('/(tabs)/add');\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const signUp = async (email, password) => {\n      try {\n        const response = await api.default.post('/auth/register', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('access_token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n        _expoRouter.router.replace('/(tabs)/add');\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const signOut = async () => {\n      await AsyncStorage.default.removeItem('access_token');\n      await AsyncStorage.default.removeItem('user');\n      setUser(null);\n      _expoRouter.router.replace('/login');\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        signIn,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this);\n  };\n});","lineCount":130,"map":[[13,2,28,0,"Object"],[13,8,28,0],[13,9,28,0,"defineProperty"],[13,23,28,0],[13,24,28,0,"exports"],[13,31,28,0],[14,4,28,0,"enumerable"],[14,14,28,0],[15,4,28,0,"get"],[15,7,28,0],[15,18,28,0,"get"],[15,19,28,0],[16,6,28,0],[16,13,28,0,"useAuth"],[16,20,28,0],[17,4,28,0],[18,2,28,0],[19,2,30,0,"Object"],[19,8,30,0],[19,9,30,0,"defineProperty"],[19,23,30,0],[19,24,30,0,"exports"],[19,31,30,0],[20,4,30,0,"enumerable"],[20,14,30,0],[21,4,30,0,"get"],[21,7,30,0],[21,18,30,0,"get"],[21,19,30,0],[22,6,30,0],[22,13,30,0,"AuthProvider"],[22,25,30,0],[23,4,30,0],[24,2,30,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_expoRouter"],[28,17,3,0],[28,20,3,0,"require"],[28,27,3,0],[28,28,3,0,"_dependencyMap"],[28,42,3,0],[29,2,4,0],[29,6,4,0,"_libApi"],[29,13,4,0],[29,16,4,0,"require"],[29,23,4,0],[29,24,4,0,"_dependencyMap"],[29,38,4,0],[30,2,4,0],[30,6,4,0,"api"],[30,9,4,0],[30,12,4,0,"_interopDefault"],[30,27,4,0],[30,28,4,0,"_libApi"],[30,35,4,0],[31,2,4,29],[31,6,4,29,"_reactJsxDevRuntime"],[31,25,4,29],[31,28,4,29,"require"],[31,35,4,29],[31,36,4,29,"_dependencyMap"],[31,50,4,29],[32,2,20,0],[32,8,20,6,"AuthContext"],[32,19,20,17],[32,35,20,20],[32,39,20,20,"createContext"],[32,45,20,33],[32,46,20,33,"createContext"],[32,59,20,33],[32,61,20,51],[33,4,21,2,"user"],[33,8,21,6],[33,10,21,8],[33,14,21,12],[34,4,22,2,"loading"],[34,11,22,9],[34,13,22,11],[34,17,22,15],[35,4,23,2,"signIn"],[35,10,23,8],[35,12,23,10],[35,18,23,10,"signIn"],[35,19,23,10],[35,24,23,22],[35,25,23,23],[35,26,23,24],[36,4,24,2,"signUp"],[36,10,24,8],[36,12,24,10],[36,18,24,10,"signUp"],[36,19,24,10],[36,24,24,22],[36,25,24,23],[36,26,24,24],[37,4,25,2,"signOut"],[37,11,25,9],[37,13,25,11],[37,19,25,11,"signOut"],[37,20,25,11],[37,25,25,23],[37,26,25,24],[38,2,26,0],[38,3,26,1],[38,4,26,2],[39,2,28,7],[39,8,28,13,"useAuth"],[39,15,28,20],[39,18,28,23,"useAuth"],[39,19,28,23],[39,24,28,29],[39,28,28,29,"useContext"],[39,34,28,39],[39,35,28,39,"useContext"],[39,45,28,39],[39,47,28,40,"AuthContext"],[39,58,28,51],[39,59,28,52],[40,2,30,7],[40,8,30,13,"AuthProvider"],[40,20,30,25],[40,23,30,28,"AuthProvider"],[40,24,30,29],[41,4,30,31,"children"],[42,2,30,71],[42,3,30,72],[42,8,30,77],[43,4,31,2],[43,10,31,8],[43,11,31,9,"user"],[43,15,31,13],[43,17,31,15,"setUser"],[43,24,31,22],[43,25,31,23],[43,28,31,26],[43,32,31,26,"useState"],[43,38,31,34],[43,39,31,34,"useState"],[43,47,31,34],[43,49,31,48],[43,53,31,52],[43,54,31,53],[44,4,32,2],[44,10,32,8],[44,11,32,9,"loading"],[44,18,32,16],[44,20,32,18,"setLoading"],[44,30,32,28],[44,31,32,29],[44,34,32,32],[44,38,32,32,"useState"],[44,44,32,40],[44,45,32,40,"useState"],[44,53,32,40],[44,55,32,41],[44,59,32,45],[44,60,32,46],[45,4,34,2],[45,8,34,2,"useEffect"],[45,14,34,11],[45,15,34,11,"useEffect"],[45,24,34,11],[45,26,34,12],[45,32,34,18],[46,6,35,4,"checkAuth"],[46,15,35,13],[46,16,35,14],[46,17,35,15],[47,4,36,2],[47,5,36,3],[47,7,36,5],[47,9,36,7],[47,10,36,8],[48,4,38,2],[48,10,38,8,"checkAuth"],[48,19,38,17],[48,22,38,20],[48,28,38,20,"checkAuth"],[48,29,38,20],[48,34,38,32],[49,6,39,4],[49,10,39,8],[50,8,40,6],[50,14,40,12,"token"],[50,19,40,17],[50,22,40,20],[50,28,40,26,"AsyncStorage"],[50,40,40,38],[50,41,40,38,"default"],[50,48,40,38],[50,49,40,39,"getItem"],[50,56,40,46],[50,57,40,47],[50,71,40,61],[50,72,40,62],[51,8,41,6],[51,14,41,12,"userStr"],[51,21,41,19],[51,24,41,22],[51,30,41,28,"AsyncStorage"],[51,42,41,40],[51,43,41,40,"default"],[51,50,41,40],[51,51,41,41,"getItem"],[51,58,41,48],[51,59,41,49],[51,65,41,55],[51,66,41,56],[52,8,43,6],[52,12,43,10,"token"],[52,17,43,15],[52,21,43,19,"userStr"],[52,28,43,26],[52,30,43,28],[53,10,44,8],[53,16,44,14,"userData"],[53,24,44,22],[53,27,44,25,"JSON"],[53,31,44,29],[53,32,44,30,"parse"],[53,37,44,35],[53,38,44,36,"userStr"],[53,45,44,43],[53,46,44,44],[54,10,45,8,"setUser"],[54,17,45,15],[54,18,45,16,"userData"],[54,26,45,24],[54,27,45,25],[56,10,47,8],[57,10,48,8],[57,14,48,12],[58,12,49,10],[58,18,49,16,"response"],[58,26,49,24],[58,29,49,27],[58,35,49,33,"api"],[58,38,49,36],[58,39,49,36,"default"],[58,46,49,36],[58,47,49,37,"get"],[58,50,49,40],[58,51,49,41],[58,61,49,51],[58,62,49,52],[59,12,50,10,"setUser"],[59,19,50,17],[59,20,50,18,"response"],[59,28,50,26],[59,29,50,27,"data"],[59,33,50,31],[59,34,50,32],[60,10,51,8],[60,11,51,9],[60,12,51,10],[60,19,51,17,"error"],[60,24,51,22],[60,26,51,24],[61,12,52,10],[62,12,53,10],[62,18,53,16,"AsyncStorage"],[62,30,53,28],[62,31,53,28,"default"],[62,38,53,28],[62,39,53,29,"removeItem"],[62,49,53,39],[62,50,53,40],[62,64,53,54],[62,65,53,55],[63,12,54,10],[63,18,54,16,"AsyncStorage"],[63,30,54,28],[63,31,54,28,"default"],[63,38,54,28],[63,39,54,29,"removeItem"],[63,49,54,39],[63,50,54,40],[63,56,54,46],[63,57,54,47],[64,12,55,10,"setUser"],[64,19,55,17],[64,20,55,18],[64,24,55,22],[64,25,55,23],[65,10,56,8],[66,8,57,6],[67,6,58,4],[67,7,58,5],[67,8,58,6],[67,15,58,13,"error"],[67,20,58,18],[67,22,58,20],[68,8,59,6,"console"],[68,15,59,13],[68,16,59,14,"error"],[68,21,59,19],[68,22,59,20],[68,41,59,39],[68,43,59,41,"error"],[68,48,59,46],[68,49,59,47],[69,6,60,4],[69,7,60,5],[69,16,60,14],[70,8,61,6,"setLoading"],[70,18,61,16],[70,19,61,17],[70,24,61,22],[70,25,61,23],[71,6,62,4],[72,4,63,2],[72,5,63,3],[73,4,65,2],[73,10,65,8,"signIn"],[73,16,65,14],[73,19,65,17],[73,25,65,17,"signIn"],[73,26,65,24,"email"],[73,31,65,37],[73,33,65,39,"password"],[73,41,65,55],[73,46,65,60],[74,6,66,4],[74,10,66,8],[75,8,67,6],[75,14,67,12,"response"],[75,22,67,20],[75,25,67,23],[75,31,67,29,"api"],[75,34,67,32],[75,35,67,32,"default"],[75,42,67,32],[75,43,67,33,"post"],[75,47,67,37],[75,48,67,38],[75,61,67,51],[75,63,67,53],[76,10,67,55,"email"],[76,15,67,60],[77,10,67,62,"password"],[78,8,67,71],[78,9,67,72],[78,10,67,73],[79,8,68,6],[79,14,68,12],[80,10,68,14,"access_token"],[80,22,68,26],[81,10,68,28,"user"],[81,14,68,32],[81,16,68,34,"userData"],[82,8,68,43],[82,9,68,44],[82,12,68,47,"response"],[82,20,68,55],[82,21,68,56,"data"],[82,25,68,60],[83,8,70,6],[83,14,70,12,"AsyncStorage"],[83,26,70,24],[83,27,70,24,"default"],[83,34,70,24],[83,35,70,25,"setItem"],[83,42,70,32],[83,43,70,33],[83,57,70,47],[83,59,70,49,"access_token"],[83,71,70,61],[83,72,70,62],[84,8,71,6],[84,14,71,12,"AsyncStorage"],[84,26,71,24],[84,27,71,24,"default"],[84,34,71,24],[84,35,71,25,"setItem"],[84,42,71,32],[84,43,71,33],[84,49,71,39],[84,51,71,41,"JSON"],[84,55,71,45],[84,56,71,46,"stringify"],[84,65,71,55],[84,66,71,56,"userData"],[84,74,71,64],[84,75,71,65],[84,76,71,66],[85,8,73,6,"setUser"],[85,15,73,13],[85,16,73,14,"userData"],[85,24,73,22],[85,25,73,23],[86,8,74,6,"router"],[86,19,74,12],[86,20,74,12,"router"],[86,26,74,12],[86,27,74,13,"replace"],[86,34,74,20],[86,35,74,21],[86,48,74,34],[86,49,74,35],[87,6,75,4],[87,7,75,5],[87,8,75,6],[87,15,75,13,"error"],[87,20,75,23],[87,22,75,25],[88,8,76,6],[88,14,76,12],[88,18,76,16,"Error"],[88,23,76,21],[88,24,76,22,"error"],[88,29,76,27],[88,30,76,28,"response"],[88,38,76,36],[88,40,76,38,"data"],[88,44,76,42],[88,46,76,44,"detail"],[88,52,76,50],[88,56,76,54],[88,70,76,68],[88,71,76,69],[89,6,77,4],[90,4,78,2],[90,5,78,3],[91,4,80,2],[91,10,80,8,"signUp"],[91,16,80,14],[91,19,80,17],[91,25,80,17,"signUp"],[91,26,80,24,"email"],[91,31,80,37],[91,33,80,39,"password"],[91,41,80,55],[91,46,80,60],[92,6,81,4],[92,10,81,8],[93,8,82,6],[93,14,82,12,"response"],[93,22,82,20],[93,25,82,23],[93,31,82,29,"api"],[93,34,82,32],[93,35,82,32,"default"],[93,42,82,32],[93,43,82,33,"post"],[93,47,82,37],[93,48,82,38],[93,64,82,54],[93,66,82,56],[94,10,82,58,"email"],[94,15,82,63],[95,10,82,65,"password"],[96,8,82,74],[96,9,82,75],[96,10,82,76],[97,8,83,6],[97,14,83,12],[98,10,83,14,"access_token"],[98,22,83,26],[99,10,83,28,"user"],[99,14,83,32],[99,16,83,34,"userData"],[100,8,83,43],[100,9,83,44],[100,12,83,47,"response"],[100,20,83,55],[100,21,83,56,"data"],[100,25,83,60],[101,8,85,6],[101,14,85,12,"AsyncStorage"],[101,26,85,24],[101,27,85,24,"default"],[101,34,85,24],[101,35,85,25,"setItem"],[101,42,85,32],[101,43,85,33],[101,57,85,47],[101,59,85,49,"access_token"],[101,71,85,61],[101,72,85,62],[102,8,86,6],[102,14,86,12,"AsyncStorage"],[102,26,86,24],[102,27,86,24,"default"],[102,34,86,24],[102,35,86,25,"setItem"],[102,42,86,32],[102,43,86,33],[102,49,86,39],[102,51,86,41,"JSON"],[102,55,86,45],[102,56,86,46,"stringify"],[102,65,86,55],[102,66,86,56,"userData"],[102,74,86,64],[102,75,86,65],[102,76,86,66],[103,8,88,6,"setUser"],[103,15,88,13],[103,16,88,14,"userData"],[103,24,88,22],[103,25,88,23],[104,8,89,6,"router"],[104,19,89,12],[104,20,89,12,"router"],[104,26,89,12],[104,27,89,13,"replace"],[104,34,89,20],[104,35,89,21],[104,48,89,34],[104,49,89,35],[105,6,90,4],[105,7,90,5],[105,8,90,6],[105,15,90,13,"error"],[105,20,90,23],[105,22,90,25],[106,8,91,6],[106,14,91,12],[106,18,91,16,"Error"],[106,23,91,21],[106,24,91,22,"error"],[106,29,91,27],[106,30,91,28,"response"],[106,38,91,36],[106,40,91,38,"data"],[106,44,91,42],[106,46,91,44,"detail"],[106,52,91,50],[106,56,91,54],[106,77,91,75],[106,78,91,76],[107,6,92,4],[108,4,93,2],[108,5,93,3],[109,4,95,2],[109,10,95,8,"signOut"],[109,17,95,15],[109,20,95,18],[109,26,95,18,"signOut"],[109,27,95,18],[109,32,95,30],[110,6,96,4],[110,12,96,10,"AsyncStorage"],[110,24,96,22],[110,25,96,22,"default"],[110,32,96,22],[110,33,96,23,"removeItem"],[110,43,96,33],[110,44,96,34],[110,58,96,48],[110,59,96,49],[111,6,97,4],[111,12,97,10,"AsyncStorage"],[111,24,97,22],[111,25,97,22,"default"],[111,32,97,22],[111,33,97,23,"removeItem"],[111,43,97,33],[111,44,97,34],[111,50,97,40],[111,51,97,41],[112,6,98,4,"setUser"],[112,13,98,11],[112,14,98,12],[112,18,98,16],[112,19,98,17],[113,6,99,4,"router"],[113,17,99,10],[113,18,99,10,"router"],[113,24,99,10],[113,25,99,11,"replace"],[113,32,99,18],[113,33,99,19],[113,41,99,27],[113,42,99,28],[114,4,100,2],[114,5,100,3],[115,4,102,2],[115,24,103,4],[115,28,103,4,"_reactJsxDevRuntime"],[115,47,103,4],[115,48,103,4,"jsxDEV"],[115,54,103,4],[115,56,103,5,"AuthContext"],[115,67,103,16],[115,68,103,17,"Provider"],[115,76,103,25],[116,6,103,26,"value"],[116,11,103,31],[116,13,103,33],[117,8,103,35,"user"],[117,12,103,39],[118,8,103,41,"loading"],[118,15,103,48],[119,8,103,50,"signIn"],[119,14,103,56],[120,8,103,58,"signUp"],[120,14,103,64],[121,8,103,66,"signOut"],[122,6,103,74],[122,7,103,76],[123,6,103,76,"children"],[123,14,103,76],[123,16,104,7,"children"],[124,4,104,15],[125,6,104,15,"fileName"],[125,14,104,15],[125,16,104,15,"_jsxFileName"],[125,28,104,15],[126,6,104,15,"lineNumber"],[126,16,104,15],[127,6,104,15,"columnNumber"],[127,18,104,15],[128,4,104,15],[128,11,105,26],[128,12,105,27],[129,2,107,0],[129,3,107,1],[130,0,107,2],[130,3]],"functionMap":{"names":["<global>","createContext$argument_0.signIn","createContext$argument_0.signUp","createContext$argument_0.signOut","useAuth","AuthProvider","useEffect$argument_0","checkAuth","signIn","signUp","signOut"],"mappings":"AAA;UCsB,cD;UEC,cF;WGC,cH;uBIG,6BJ;4BKE;YCI;GDE;oBEE;GFyB;iBGE;GHa;iBIE;GJa;kBKE;GLK;CLO"},"hasCjsExports":false},"type":"js/module"}]}